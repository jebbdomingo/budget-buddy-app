import{d as T,r as y,u as B,w as D,o as V,c as $,a as e,b as s,e as r,f as i,F,g as R,h as A,i as u,j as M,t as c,s as l,n as N,k as E,_ as I}from"./index-D7RyHx2W.js";const U={class:"grid"},j={class:"col-12",style:{padding:"0"}},z={class:"card",style:{padding:"1rem"}},G={class:"flex align-items-center gap-2 text-secondary"},O=T({__name:"TransactionsView",setup(H){const m=R(),g=A(),f=y(null),a=B(),_=y(),h=n=>[{"bg-blue-50":n.transaction_id}],b=n=>{let t="";return n>0?t="text-primary-600":t="text-secondary",t},v=n=>n.toLocaleString("en-US",{style:"currency",currency:"PHP"}),w=n=>{const t=new Date(n);return new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"long",year:"numeric"}).format(t)};function x(){g.go(-1)}const S=n=>{const t={...n};a.transaction.transaction_id=t.transaction_id,a.transaction.budget=t.budget,a.transaction.account_id=t.account_id,a.transaction.transaction_type=t.transaction_type,a.transaction.transaction_date=t.transaction_date,a.transaction.amount=Math.abs(t.amount),a.transaction.budget_month=t.budget_month,a.transaction.payee=t.payee,a.transaction.memo=t.memo,a.transactionDialog=!0},p=n=>{_.value=a.getAccountTransactions(n)};return D(a.transactions,n=>{p(m.params.account_id),console.log("TransactionsView.watch:transactions")},{deep:!0}),V(async()=>{p(m.params.account_id)}),(n,t)=>{const d=u("Button"),C=u("Toolbar"),k=u("SplitButton");return M(),$(F,null,[e("div",U,[e("div",j,[e("div",z,[s(C,null,{start:r(()=>[e("div",null,[s(d,{label:"Accounts",icon:"pi pi-angle-left",class:"mr-2",severity:"secondary",onClick:t[0]||(t[0]=o=>x())}),s(d,{label:"Transaction",icon:"pi pi-plus",class:"mr-2",severity:"primary",onClick:t[1]||(t[1]=o=>i(a).transactionDialog=!0)})])]),_:1}),s(i(E),{stateStorage:"session",stateKey:"dt-state-account-transactions-session",ref_key:"dt",ref:f,stripedRows:"",value:_.value,rowGroupMode:"subheader",groupRowsBy:"transaction_date",rowClass:h,sortField:"transaction_date",sortOrder:-1},{groupheader:r(o=>[e("div",G,[e("span",null,[e("strong",null,c(w(o.data.transaction_date)),1)])])]),default:r(()=>[s(i(l),{field:"transaction_date",header:"Date"}),s(i(l),{field:"payee"},{body:r(o=>[e("div",null,c(o.data.payee),1),e("div",null,[e("small",null,c(o.data.budget_title),1)])]),_:1}),s(i(l),{field:"amount",headerStyle:"width: 9rem; text-align: right",bodyStyle:"text-align: right"},{body:r(o=>[e("div",{class:N(b(o.data.amount))},c(v(o.data.amount)),3),e("div",null,[e("small",null,c(o.data.memo),1)])]),_:1}),s(i(l),{exportable:!1,style:{"min-width":"8rem"},headerStyle:"width: 7rem; text-align: right",bodyStyle:"text-align: right"},{body:r(o=>[s(k,{label:"Edit",icon:"pi pi-check",menuButtonIcon:"pi pi-cog",onClick:K=>S(o.data),severity:"secondary",model:[{label:"Archive",icon:"pi pi-trash",command:()=>{}}]},null,8,["onClick","model"])]),_:1})]),_:1},8,["value"])])])]),s(I)],64)}}});export{O as default};
