import{d as S,r as C,u as k,o as B,c as T,a as n,b as s,w as i,e as r,F as D,f as $,g as R,h as u,i as F,t as c,s as l,n as M,j as N,_ as V}from"./index-Cyf_k55b.js";const z={class:"grid"},A={class:"col-12"},E={class:"card"},I={class:"my-2"},U={class:"flex align-items-center gap-2 text-secondary"},K=S({__name:"TransactionsView",setup(j){const m=$(),_=R(),p=C(null),a=k(),y=o=>[{"bg-blue-50":o.transaction_id}],g=o=>{let t="";return o>0?t="text-primary-600":t="text-secondary",t},b=o=>o.toLocaleString("en-US",{style:"currency",currency:"PHP"}),f=o=>{const t=new Date(o);return new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"long",year:"numeric"}).format(t)};function h(){_.go(-1)}const v=o=>{const t={...o};a.transaction.transaction_id=t.transaction_id,a.transaction.budget=t.budget,a.transaction.account_id=t.account_id,a.transaction.transaction_type=t.transaction_type,a.transaction.transaction_date=t.transaction_date,a.transaction.amount=Math.abs(t.amount),a.transaction.budget_month=t.budget_month,a.transaction.payee=t.payee,a.transaction.memo=t.memo,a.transactionDialog=!0};return B(async()=>{a.initialize(m.params.account_id)}),(o,t)=>{const d=u("Button"),x=u("Toolbar"),w=u("SplitButton");return F(),T(D,null,[n("div",z,[n("div",A,[n("div",E,[s(x,{class:"mb-4"},{start:i(()=>[n("div",I,[s(d,{label:"Accounts",icon:"pi pi-angle-left",class:"mr-2",severity:"secondary",onClick:t[0]||(t[0]=e=>h())}),s(d,{label:"Transaction",icon:"pi pi-plus",class:"mr-2",severity:"primary",onClick:t[1]||(t[1]=e=>r(a).transactionDialog=!0)})])]),_:1}),s(r(N),{stateStorage:"session",stateKey:"dt-state-account-transactions-session",ref_key:"dt",ref:p,stripedRows:"",value:r(a).accountTransactions,rowGroupMode:"subheader",groupRowsBy:"transaction_date",rowClass:y},{groupheader:i(e=>[n("div",U,[n("span",null,[n("strong",null,c(f(e.data.transaction_date)),1)])])]),default:i(()=>[s(r(l),{field:"transaction_date",header:"Date"}),s(r(l),{field:"payee"},{body:i(e=>[n("div",null,c(e.data.payee),1),n("div",null,[n("small",null,c(e.data.budget.title),1)])]),_:1}),s(r(l),{field:"amount",headerStyle:"width: 9rem; text-align: right",bodyStyle:"text-align: right"},{body:i(e=>[n("div",{class:M(g(e.data.amount))},c(b(e.data.amount)),3),n("div",null,[n("small",null,c(e.data.memo),1)])]),_:1}),s(r(l),{exportable:!1,style:{"min-width":"8rem"},headerStyle:"width: 7rem; text-align: right",bodyStyle:"text-align: right"},{body:i(e=>[s(w,{label:"Edit",icon:"pi pi-check",menuButtonIcon:"pi pi-cog",onClick:G=>v(e.data),severity:"secondary",model:[{label:"Archive",icon:"pi pi-trash",command:()=>{}}]},null,8,["onClick","model"])]),_:1})]),_:1},8,["value"])])])]),s(V)],64)}}});export{K as default};
